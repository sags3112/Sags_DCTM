Centera in a nutshell

Great,  I write this up then find a great Support Note that describe most of the write-up.
esg113589 How to troubleshoot Content Server environment with Centera box

Well since it is written here it is anyways.
I do try to cover what tony talked about in the coach session and give some insights so may be worth reading.

1) We get most cases on configuration.
This is Documented in the Admin Guide:
Defining the connection string:
You must define the connection string for the content-addressed storage area. This value is used by Content Server to connect to the Centera host. The connection string is
recorded in a_storage_params[0]. 
The basic value is in the format: IP_address|hostname{,IP_address|hostname}?Centera_profile

Where IP_address is the IP address of the Centera host, hostname is the host name of the Centera machine, and Centera_profile is a full-path specification of a Centera profile. The path must be accessible from the Content Server host machine and the specified directory
must be readable by the Content Server installation owner.
Note: The value defined for a_storage_params[0] is passed directly to the FPPool_Open() Centera SDK function. You can specify any acceptable format of the Centera Connection string as the value. Contact your Centera administrator to determine the correct connection string for your environment.

Expecting this:
a_storage_params[0]:IP_address|hostname{,IP_address|hostname}?Centera_profile
example:
a_storage_params[0]:10.2.5.13,10.2.5.14?/app/documentum/docc.pea

But this is the BAD configuration that customer set up:
a_storage_params[0]:10.2.5.13
		[1]:10.2.5.14
		[2]:?/app/documentum/docc.pea

As you see above they entered on 3 separate attributes.
This happens 90% of the time on new installs. This is a must check.

Before you ping a PSE, you need to have a dump of ca_store.

I recommend testing without the PEA file first, but the Centera must be set up for anonymous connection.
Most are, but the secure sites are not, test using Centera verify
2) Trouble Shooting:
Testing Centera IP and outside of Documentum:
Testing Centera IP:
You cannot use the standard ping command to test connectivity to Centera system,  you must use the Centera ping

Testing the PEA file:
First understand what the pea file is, in bobanese:
Think of it like a ldap certificate, it hands over the certificate for validation.
So we us  this Centera Verify command to test a PEA file.
Which really just connects and hands over the certificate for validation.
The certificate is generated by the Centera system as it should be good.
Have had issues when they FTP the file over to CS system 
or a working one fails and you  find they changed the PEA file on Centera

Here is the link that you can use to download them:
https://community.emc.com/docs/DOC-2393

We talked about why we need the tracing:
To recap:
We embed Centera client into our product. Known as SDK
With both these traces enabled, what we are seeing is what we are handing to SDK and what the SDK is handing to Centera.
So if we are handing it to the SDK correctly, then the issue is with EMC Centera group.
We will have to open a collaboration task.


Turn on the needed tracing:
esg24624
To generate trace from Centera library: 
set the environment variable FPLIBRARY_LOG_FILE_DEBUG to a filename. For example, 

setenv FPLIBRARY_LOG_FILE_DEBUG /tmp/centera.log 

On Unix platforms, this environment variable must be set prior to starting up the Content Server, in the same shell in which dm_start_<docbase> script is executed. 
On Windows platform, the environment variable should be a SYSTEM environment variable set through Control Panel->System->Advanced->Environment variables applet. 

To turn CA store tracing on from iapi:
apply,c,NULL,SET_OPTIONS,OPTION,S,ca_store_trace,VALUE,B,T

Perform the test to reproduce the error - reproduce the error by establishing a new session 

To turn the CA store tracing off:
apply,c,NULL,SET_OPTIONS,OPTION,S,ca_store_trace,VALUE,B,F

CA store tracing will be written to the repository log file. 

At times, we may need to enable dfc tracing from the client:
DFC tracing options:
dfc.tracing.enable=true
dfc.tracing.verbose=true
dfc.tracing.max_stack_depth=0
dfc.tracing.include_rpcs=true
dfc.tracing.mode=compact
dfc.tracing.include_session_id = true
dfc.tracing.dir=<path_to_dir>

Make sure you get the filename they are adding, this makes it easier to search.

3) Centera Plug in issues:
For this issue you need to understand how we use the plug-in.
So what we do, is take the Centera lib file and load it into the primary filestore and call it from there.
So the issue becomes not being able to access the file in the content storage location.
I found a great support note esg92453 that most describes the issue and overall fix.

So here are some issues that are not listed that can cause the problems.
We say that the Centera cannot be the primary filestore.
Here I am talking about filestore_01, not the default filestore.
So comes into play when the customer tries to copy the entire filestore_01 to Centera, then removing filestore_01

This issue can even happen if the move to say another non Centera filestore.
Had a user migrate filestore _01 to filestore_02
Everything worked until the deleted ca_store and created a new one.

So to recap, the ca_store must be on filestore_01

esg113589 How to troubleshoot Content Server environment with Centera box
esg93864 How to set up Centera with Documentum Content Server?
esg100169 Failed to authenticate PEA data : FP_AUTHENTICATION_FAILED_ERR, error code:-10153"
esg100399  What to check if RPS retention is not being propagated to Centera?
esg99149 Where can I find the C-Clip ID returned from ca_store as the content address?
esg113365 How to determine if the EMC Centera Store is enabled for a docbase
esg43822 How to set up and propagate a retention date to an EMC Centera storage?
esg92453 DM_STORAGE_E_CA_STORE_INVALID_CONTENT_ADDRESS bad clip info
esg108203 After deploying a cumulative hotfix build for Content Server, the plug-in for Centera fails with [DM_STORAGE_E_CANT_INITIALIZE_PLUGIN]
esg92453 Restoring Centera plug-in after rolling back an upgrade process
